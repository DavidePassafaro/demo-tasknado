<div class="create-task-form" [class.expanded]="isExpanded()">
  <div class="create-task-header">
    <h2>{{ isEditMode() ? 'Edit task' : 'Create a new task' }}</h2>
    @if (!isEditMode()) {
      <button 
        type="button"
        class="toggle-btn"
        (click)="toggleExpanded()"
        [attr.aria-expanded]="isExpanded()"
        title="Toggle form"
      >
        <span class="toggle-icon">{{ isExpanded() ? '−' : '+' }}</span>
      </button>
    }
  </div>

  @if (isExpanded()) {
    <form (ngSubmit)="addTask()" class="task-form">
      <div class="form-group">
        <label for="taskTitle">Task title *</label>
        <input
          id="taskTitle"
          type="text"
          [ngModel]="taskTitle()"
          (ngModelChange)="taskTitle.set($event)"
          name="taskTitle"
          placeholder="Enter the task title"
          required
        />
      </div>

      <div class="form-group">
        <label for="taskDescription">Description</label>
        <textarea
          id="taskDescription"
          [ngModel]="taskDescription()"
          (ngModelChange)="taskDescription.set($event)"
          name="taskDescription"
          placeholder="Enter a description (optional)"
          rows="3"
        ></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="submit-btn">
          {{ isEditMode() ? '✓ Save Changes' : 'Add Task' }}
        </button>
        @if (isEditMode()) {
          <button 
            type="button" 
            class="cancel-btn" 
            (click)="cancel()"
          >
            ✕ Cancel
          </button>
        }
      </div>
    </form>
  }
</div>
