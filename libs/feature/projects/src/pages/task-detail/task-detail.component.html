<div class="task-detail-container">
  @if (task()) {
  <div class="task-detail-header">
    <button class="back-btn" (click)="goBack()" title="Go back">â† Back</button>
    <h1>{{ task()!.title }}</h1>
  </div>

  @if (!isEditMode()) {
  <div class="task-detail-card">
    <div class="task-status-banner" [class.completed]="isTaskStatusCompleted()">
      <span class="status-badge">
        @if (isTaskStatusCompleted()) { âœ“ Completed } @else { In Progress }
      </span>
    </div>

    <div class="task-detail-body">
      <div class="task-section">
        <h2>Description</h2>
        @if (task()!.description) {
        <p class="task-description">{{ task()!.description }}</p>
        } @else {
        <p class="no-description">No description provided</p>
        }
      </div>

      <div class="task-meta-section">
        <div class="meta-item">
          <span class="meta-label">Created</span>
          <span>{{ task()!.createdAt | date : 'medium' }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Status</span>
          <span [class.completed]="isTaskStatusCompleted()">
            {{ isTaskStatusCompleted() ? 'Completed' : 'In Progress' }}
          </span>
        </div>
      </div>

      <div class="task-actions">
        <button
          class="action-btn toggle-btn"
          (click)="toggleTask()"
          [class.completed]="isTaskStatusCompleted()"
        >
          {{ isTaskStatusCompleted() ? 'âœ“ Mark as In Progress' : 'â—‹ Mark as Completed' }}
        </button>
        <button class="action-btn edit-btn" (click)="startEdit()">âœ Edit</button>
        <button class="action-btn delete-btn" (click)="deleteTask()">ğŸ—‘ Delete</button>
      </div>
    </div>
  </div>
  } @else {
  <div class="edit-container">
    <tn-edit-entity
      [entity]="{
        name: task()!.title,
        description: task()!.description || ''
      }"
      [includeColors]="false"
      entityType="task"
      (entityUpdated)="saveEdit($event)"
      (closed)="cancelEdit()"
    />
  </div>
  } } @else {
  <div class="no-task">
    <p>Task not found</p>
    <button (click)="goBack()">Go Back</button>
  </div>
  }
</div>
