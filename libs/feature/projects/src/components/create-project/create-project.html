<div class="create-project-form" [class.expanded]="isExpanded()">
  <div class="create-project-header">
    <h2>{{ isEditMode() ? 'Edit project' : 'Create a new project' }}</h2>
    @if (!isEditMode()) {
    <button
      type="button"
      class="toggle-btn"
      (click)="toggleExpanded()"
      [attr.aria-expanded]="isExpanded()"
      title="Toggle form"
    >
      <span class="toggle-icon">{{ isExpanded() ? '−' : '+' }}</span>
    </button>
    }
  </div>

  @if (isExpanded()) {
  <form (ngSubmit)="addProject()" class="project-form">
    <div class="form-group">
      <label for="projectName">Project name *</label>
      <input
        id="projectName"
        type="text"
        [ngModel]="projectName()"
        (ngModelChange)="projectName.set($event)"
        name="projectName"
        placeholder="Enter the project name"
        required
      />
    </div>

    <div class="form-group">
      <label for="projectDescription">Description</label>
      <textarea
        id="projectDescription"
        [ngModel]="projectDescription()"
        (ngModelChange)="projectDescription.set($event)"
        name="projectDescription"
        placeholder="Enter a description (optional)"
        rows="3"
      ></textarea>
    </div>

    <div class="form-group">
      <span>Project color</span>
      
      <div class="color-selector">
        @for (color of availableColors; track color) {
        <button
          type="button"
          class="color-dot"
          [class.selected]="selectedColor() === color"
          [style.background-color]="color"
          (click)="selectedColor.set(color)"
          [attr.title]="color"
          [attr.aria-label]="'Select color ' + color"
        ></button>
        }
      </div>
    </div>

    <div class="form-actions">
      @if (isEditMode()) {
      <button type="button" class="cancel-btn" (click)="cancel()">Cancel</button>
      } @else {
      <button type="button" class="cancel-btn" (click)="cancel()">Clear</button>
      }

      <button type="submit" class="submit-btn">
        {{ isEditMode() ? '✓ Save Changes' : 'Add Project' }}
      </button>
    </div>
  </form>
  }
</div>
