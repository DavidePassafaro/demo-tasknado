<div class="edit-entity-container" [class.expanded]="isExpanded()">
  @if (entity()) {
  <form (ngSubmit)="update()" class="entity-form">
    <div class="form-header">
      <h2>Edit {{ entityName() }}</h2>
      <button type="button" class="close-btn" (click)="close()" aria-label="Close">&times;</button>
    </div>

    <!-- Name field -->
    <div class="form-group">
      <label [for]="'name-input'">{{ entityName() }} Name</label>

      <input
        [id]="'name-input'"
        type="text"
        placeholder="Enter name..."
        [(ngModel)]="name"
        (ngModelChange)="name.set($event)"
        name="name"
        required
      />
    </div>

    <!-- Description field -->
    <div class="form-group">
      <label [for]="'description-input'">Description</label>
      <textarea
        [id]="'description-input'"
        placeholder="Enter description..."
        [(ngModel)]="description"
        (ngModelChange)="description.set($event)"
        name="description"
        rows="4"
      ></textarea>
    </div>

    <!-- Color picker (if enabled) -->
    @if (includeColors()) {
    <div class="form-group">
      <span>Color</span>

      <div class="color-picker">
        @for (colorOption of colors; track colorOption) {
        <button
          type="button"
          class="color-option"
          [style.background-color]="colorOption"
          [class.selected]="color() === colorOption"
          (click)="color.set(colorOption)"
          [attr.aria-label]="'Color ' + colorOption"
        ></button>
        }
      </div>
    </div>
    }

    <!-- Buttons -->
    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="close()">Cancel</button>
      <button type="submit" class="btn-submit" [disabled]="!name().trim()">
        Update {{ entityName() }}
      </button>
    </div>
  </form>
  }
</div>
